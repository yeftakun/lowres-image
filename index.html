<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Image Editor</title>
<style>
  /* Body styles */
  body {
    background-color: #222; /* Dark background */
    color: #ddd; /* Light text color */
    font-family: sans-serif;
    margin: 0;
    padding: 0;
  }

  /* Container styles */
  #container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    max-width: 800px; /* Optional: Set a maximum width */
    margin: 20px auto; /* Center the container horizontally */
  }

  /* Input and button styles */
  input[type="file"], button {
    background-color: #444; /* Darker background for buttons and input */
    color: #eee; /* Lighter text color for buttons and input */
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 10px;
  }

  button:hover {
    background-color: #555; /* Slightly darker background on hover */
  }

  /* Image container styles */
  #image-container {
    margin-bottom: 20px;
  }

  /* Image preview styles */
  #image-preview {
    max-width: 400px;
    border: 1px solid #444; /* Add a subtle border */
  }

  /* Tombol styles */
  #copy-button {
        background-color: transparent; /* Hapus latar belakang */
        border: none; /* Hapus border */
        cursor: pointer;
        margin-bottom: 10px;
        padding: 0; /* Hapus padding */
        background-color: #555;
    }

    /* Gambar dalam tombol */
    #copy-button img {
        width: 32px; /* Lebar gambar */
        height: 32px; /* Tinggi gambar */
    }
    
</style>
</head>
<body>
<div id="container">
  <input type="file" id="file-input">
  <br>
  <button id="downres-button">Downres</button>
  <br>
  <div id="image-container">
    <img id="image-preview" src="#" alt="Preview" style="max-width: 400px;">
  </div>
  <button id="save-button">Save As</button>
  <button id="copy-button">
    <img src="./assets/clip.png" alt="Copy Image">
  </button>
</div>

<script>
    // Function to downscale image
    function downscaleImage(image, percent) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const newWidth = image.width * (percent / 100);
        const newHeight = image.height * (percent / 100);
        canvas.width = newWidth;
        canvas.height = newHeight;
        ctx.drawImage(image, 0, 0, newWidth, newHeight);
        return canvas.toDataURL();
    }

    document.getElementById('file-input').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
            const image = new Image();
            image.onload = function() {
                document.getElementById('image-preview').src = e.target.result;
            };
            image.src = e.target.result;
        };
        reader.readAsDataURL(file);
    });

    document.getElementById('downres-button').addEventListener('click', function() {
        const image = document.getElementById('image-preview');
        const percent = parseInt(prompt('Enter downscaling percentage:', '50'));
        if (!isNaN(percent)) {
            const newDataUrl = downscaleImage(image, percent);
            image.src = newDataUrl;
        } else {
            alert('Invalid percentage!');
        }
    });

    document.getElementById('save-button').addEventListener('click', function() {
        const link = document.createElement('a');
        link.href = document.getElementById('image-preview').src;
        link.download = 'edited_image.png';
        link.click();
    });

    document.getElementById('copy-button').addEventListener('click', function() {
        const image = document.getElementById('image-preview');
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = image.width;
        canvas.height = image.height;
        ctx.drawImage(image, 0, 0);
        canvas.toBlob(function(blob) {
            navigator.clipboard.write([
                new ClipboardItem({
                    'image/png': blob
                })
            ]).then(function() {
                alert('Image copied to clipboard!');
            }, function() {
                alert('Failed to copy image to clipboard!');
            });
        }, 'image/png');
    });
</script>
</body>
</html>
